<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í•œê¸€ ì•”í˜¸ ë³€í™˜ê¸°</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      padding: 20px;
    }
    textarea {
      width: 100%;
      height: 80px;
      font-size: 18px;
      background: #111;
      color: #fff;
      border: 1px solid #555;
    }
    .output {
      margin-top: 15px;
      font-size: 20px;
      background: #222;
      padding: 10px;
      min-height: 40px;
    }
  </style>
</head>
<body>

<h2>ğŸ” í•œê¸€ â†’ ìˆ«ì ì•”í˜¸ ë³€í™˜ê¸°</h2>

<textarea id="input" placeholder="í•œê¸€ì„ ì…ë ¥í•´ë¼"></textarea>

<div class="output" id="output"></div>

<script>
const map = {
  "ã…‚":"1","ã…":"1.5","ã…‹":"1.75","ã…ˆ":"2","ã„´":"2.5",
  "ã…Œ":"2.75","ã„·":"3","ã…‡":"3.5","ã…Š":"3.75",
  "ã„±":"4","ã„¹":"4.5","ã…":"4.75","ã……":"5",
  "ã…":"5.5","ã… ":"5.75","ã…›":"6","ã…—":"6.5",
  "ã…œ":"6.75","ã…•":"7","ã…“":"7.5","ã…¡":"7.75",
  "ã…‘":"8","ã…":"8.5","ã…":"9","ã…£":"9.5",
  "ã…”":"0",
  "ã…ƒ":"11","ã…‰":"22","ã„¸":"33","ã„²":"44",
  "ã…†":"55","ã…’":"99","ã…–":"00"
};

const CHO = ["ã„±","ã„²","ã„´","ã„·","ã„¸","ã„¹","ã…","ã…‚","ã…ƒ","ã……","ã…†","ã…‡","ã…ˆ","ã…‰","ã…Š","ã…‹","ã…Œ","ã…","ã…"];
const JUNG = ["ã…","ã…","ã…‘","ã…’","ã…“","ã…”","ã…•","ã…–","ã…—","ã…˜","ã…™","ã…š","ã…›","ã…œ","ã…","ã…","ã…Ÿ","ã… ","ã…¡","ã…¢","ã…£"];
const JONG = ["","ã„±","ã„²","ã„³","ã„´","ã„µ","ã„¶","ã„·","ã„¹","ã„º","ã„»","ã„¼","ã„½","ã„¾","ã„¿","ã…€","ã…","ã…‚","ã…„","ã……","ã…†","ã…‡","ã…ˆ","ã…Š","ã…‹","ã…Œ","ã…","ã…"];

const JUNG_SPLIT = {
  "ã…˜":["ã…—","ã…"],
  "ã…™":["ã…—","ã…"],
  "ã…š":["ã…—","ã…£"],
  "ã…":["ã…œ","ã…“"],
  "ã…":["ã…œ","ã…”"],
  "ã…Ÿ":["ã…œ","ã…£"],
  "ã…¢":["ã…¡","ã…£"]
};

const JONG_SPLIT = {
  "ã„³":["ã„±","ã……"],
  "ã„µ":["ã„´","ã…ˆ"],
  "ã„¶":["ã„´","ã…"],
  "ã„º":["ã„¹","ã„±"],
  "ã„»":["ã„¹","ã…"],
  "ã„¼":["ã„¹","ã…‚"],
  "ã„½":["ã„¹","ã……"],
  "ã„¾":["ã„¹","ã…Œ"],
  "ã„¿":["ã„¹","ã…"],
  "ã…€":["ã„¹","ã…"],
  "ã…„":["ã…‚","ã……"]
};

function decompose(char) {
  const code = char.charCodeAt(0) - 0xAC00;
  if (code < 0 || code > 11171) return [char];

  const cho = CHO[Math.floor(code / 588)];
  const jung = JUNG[Math.floor((code % 588) / 28)];
  const jong = JONG[code % 28];

  let result = [cho];

  if (JUNG_SPLIT[jung]) {
    result.push(...JUNG_SPLIT[jung]);
  } else {
    result.push(jung);
  }

  if (jong) {
    if (JONG_SPLIT[jong]) {
      result.push(...JONG_SPLIT[jong]);
    } else {
      result.push(jong);
    }
  }

  return result;
}

document.getElementById("input").addEventListener("input", e => {
  const text = e.target.value;
  let result = [];

  for (let ch of text) {
    if (ch === " ") {
      result.push(" / ");
      continue;
    }
    const parts = decompose(ch);
    for (let p of parts) {
      if (map[p]) result.push(map[p]);
    }
  }

  document.getElementById("output").innerText = result.join(" ");
});
</script>

</body>
</html>
