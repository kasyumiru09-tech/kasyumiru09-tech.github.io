<script>
const map = {
  "ㅂ":"1","ㅁ":"1.5","ㅋ":"1.75","ㅈ":"2","ㄴ":"2.5",
  "ㅌ":"2.75","ㄷ":"3","ㅇ":"3.5","ㅊ":"3.75",
  "ㄱ":"4","ㄹ":"4.5","ㅍ":"4.75","ㅅ":"5",
  "ㅎ":"5.5","ㅠ":"5.75","ㅛ":"6","ㅗ":"6.5",
  "ㅜ":"6.75","ㅕ":"7","ㅓ":"7.5","ㅡ":"7.75",
  "ㅑ":"8","ㅏ":"8.5","ㅐ":"9","ㅣ":"9.5",
  "ㅔ":"0",
  "ㅃ":"11","ㅉ":"22","ㄸ":"33","ㄲ":"44",
  "ㅆ":"55","ㅒ":"99","ㅖ":"00"
};

const CHO = ["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];
const JUNG = ["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"];
const JONG = ["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];

const JUNG_SPLIT = {
  "ㅘ":["ㅗ","ㅏ"],
  "ㅙ":["ㅗ","ㅐ"],
  "ㅚ":["ㅗ","ㅣ"],
  "ㅝ":["ㅜ","ㅓ"],
  "ㅞ":["ㅜ","ㅔ"],
  "ㅟ":["ㅜ","ㅣ"],
  "ㅢ":["ㅡ","ㅣ"]
};

function decompose(char) {
  const code = char.charCodeAt(0) - 0xAC00;
  if (code < 0 || code > 11171) return [char];

  const cho = CHO[Math.floor(code / 588)];
  const jung = JUNG[Math.floor((code % 588) / 28)];
  const jong = JONG[code % 28];

  let result = [cho];

  if (JUNG_SPLIT[jung]) {
    result.push(...JUNG_SPLIT[jung]);
  } else {
    result.push(jung);
  }

  if (jong) result.push(jong);

  return result;
}

document.getElementById("input").addEventListener("input", e => {
  const text = e.target.value;
  let result = [];

  for (let ch of text) {
    if (ch === " ") {
      result.push(" / ");
      continue;
    }
    const parts = decompose(ch);
    for (let p of parts) {
      if (map[p]) result.push(map[p]);
    }
  }

  document.getElementById("output").innerText = result.join(" ");
});
</script>
